[back](../../20251015定期月總結.md)

## 積分飽和

積分項有時破壞控制穩定性

$$ u(t) = K_i \int_0^t e(\tau) d\tau $$

1. **控制輸出受限制（飽和）**  
   例如馬達最大電壓、伺服閥最大開度、API 請求速率上限。  
   當輸出達極限時，積分器還在「累積誤差」。

2. **長期大誤差（startup / error burst）**  
   系統啟動初期或瞬間負載大變，積分累積速度過快。

3. **Ki 設太大（積分增益過高）**  
   對小誤差太敏感，積分成長太快。

| 狀況 | 比喻 |
|------|------|
| 誤差大 | 車速太慢，你踩油門 |
| 飽和 | 油門已經踩到底（但車爬坡動不了） |
| 積分累積 | 腳還持續用力踩，內心覺得「要更快」 |
| 飽和解除 | 坡變平，車子瞬間暴衝 |
| 積分飽和 | 你已踩太久太深，即使鬆油門也要一段時間才慢下來 |



## 樣本權重

工作一般一批次進行，有時會出現最後一批通常不足數量的情形
以不足數量的結果直接回饋給controller會出錯

## 資料稀疏更新

這個情況在生產環境中非常常見：
- 隊列快空了 (部分觀測樣本 (partial feedback))
- 某些批次被上游限流
- 或者是你系統在低流量時段運行

